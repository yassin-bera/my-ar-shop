<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ú¯Ø§Ù„Ø±ÛŒ Ú¯Ù„Ø¯Ø§Ù† ÙˆØ§Ù‚Ø¹ÛŒØª Ø§ÙØ²ÙˆØ¯Ù‡</title>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>

    <style>
        :root {
            --primary-color: #00bf63;
            --glass-bg: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(255, 255, 255, 0.4);
            --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Vazirmatn', sans-serif;
            background-color: #f0f2f5;
            height: 100vh;
            overflow: hidden;
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ Ù†Ù…Ø§ÛŒØ´Ú¯Ø± Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ */
        model-viewer {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            --poster-color: transparent;
        }

        /* Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ (Glassmorphism) */
        .ui-container {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 24px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .header {
            text-align: center;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        /* Ù„ÛŒØ³Øª Ú¯Ù„Ø¯Ø§Ù†â€ŒÙ‡Ø§ */
        .pot-selector {
            display: flex;
            overflow-x: auto;
            gap: 12px;
            padding-bottom: 5px;
            scrollbar-width: none; /* Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ø§Ø± */
        }
        
        .pot-selector::-webkit-scrollbar { display: none; }

        .pot-btn {
            min-width: 70px;
            height: 70px;
            border-radius: 16px;
            border: 2px solid transparent;
            background: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .pot-btn.active {
            border-color: var(--primary-color);
            transform: scale(1.05);
            background: #e6fffa;
        }

        /* Ø§Ù†ØªØ®Ø§Ø¨ Ø±Ù†Ú¯ */
        .color-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .color-btn {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: 2px solid #fff;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }

        .color-btn:active { transform: scale(0.9); }

        /* Ø¯Ú©Ù…Ù‡ ÙˆØ§Ù‚Ø¹ÛŒØª Ø§ÙØ²ÙˆØ¯Ù‡ */
        .ar-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 12px;
            font-family: 'Vazirmatn', sans-serif;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(0, 191, 99, 0.4);
        }

        /* Ø¢ÛŒÚ©ÙˆÙ† AR */
        .ar-icon { width: 20px; height: 20px; fill: white; }

        /* Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ú¯ÙˆÚ¯Ù„ */
        .slot-ar-button { display: none; }

    </style>
</head>
<body>

    <model-viewer 
        id="viewer"
        src="https://modelviewer.dev/shared-assets/models/Astronaut.glb" 
        ios-src="https://modelviewer.dev/shared-assets/models/Astronaut.usdz"
        alt="Ú¯Ù„Ø¯Ø§Ù† Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ"
        ar
        ar-modes="scene-viewer webxr quick-look"
        camera-controls
        shadow-intensity="1"
        auto-rotate>

        <button slot="ar-button" class="ar-button">
            <svg class="ar-icon" viewBox="0 0 24 24"><path d="M5 3C3.9 3 3 3.9 3 5V9H5V5H9V3H5M5 15V19H9V21H5C3.9 21 3 20.1 3 19V15H5M19 3H15V5H19V9H21V5C21 3.9 20.1 3 19 3M19 21H15V19H19V15H21V19C21 20.1 20.1 21 19 21Z"/></svg>
            Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± Ù…Ø­ÛŒØ· ÙˆØ§Ù‚Ø¹ÛŒ
        </button>

    </model-viewer>

    <div class="ui-container">
        <div class="header">Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø¯Ù„ Ú¯Ù„Ø¯Ø§Ù†</div>
        
        <div class="pot-selector" id="potList">
            </div>

        <div class="header" style="margin-top: 10px; font-size: 0.9em;">ØªØºÛŒÛŒØ± Ø±Ù†Ú¯</div>
        
        <div class="color-selector">
            <div class="color-btn" style="background: #ffffff;" onclick="changeColor('#ffffff')"></div>
            <div class="color-btn" style="background: #e74c3c;" onclick="changeColor('#e74c3c')"></div>
            <div class="color-btn" style="background: #3498db;" onclick="changeColor('#3498db')"></div>
            <div class="color-btn" style="background: #f1c40f;" onclick="changeColor('#f1c40f')"></div>
            <div class="color-btn" style="background: #2c3e50;" onclick="changeColor('#2c3e50')"></div>
        </div>
    </div>

    <script>
        const viewer = document.querySelector('#viewer');
        const potList = document.querySelector('#potList');

        // ØªØ¹Ø±ÛŒÙ Ûµ Ù…Ø¯Ù„ Ú¯Ù„Ø¯Ø§Ù† (Ù„ÛŒÙ†Ú© ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯)
        // Ù…Ù† Ø§Ø² Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ ØªØ³ØªÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯Ù…. Ø´Ù…Ø§ Ø¨Ø§ÛŒØ¯ Ø¢Ø¯Ø±Ø³ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ØªØ§Ù† Ø±Ø§ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ú©Ù†ÛŒØ¯.
       // ØªØ¹Ø±ÛŒÙ Ûµ Ù…Ø¯Ù„ Ú¯Ù„Ø¯Ø§Ù† Ø¨Ø§ Ø¢Ø¯Ø±Ø³ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯Ù‡ Ø´Ù…Ø§
       const pots = [
       { name: "Ú¯Ù„Ø¯Ø§Ù† Û±", src: "./pot1.glb", icon: "ğŸº" },
       { name: "Ú¯Ù„Ø¯Ø§Ù† Û²", src: "./pot2.glb", icon: "ğŸª´" },
       { name: "Ú¯Ù„Ø¯Ø§Ù† Û³", src: "./pot3.glb", icon: "ğŸŒµ" },
       { name: "Ú¯Ù„Ø¯Ø§Ù† Û´", src: "./pot4.glb", icon: "ğŸŒ»" },
       { name: "Ú¯Ù„Ø¯Ø§Ù† Ûµ", src: "./pot5.glb", icon: "ğŸŒ³" }
    ];

        // Ø³Ø§Ø®Øª Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø±
        pots.forEach((pot, index) => {
            const btn = document.createElement('div');
            btn.className = `pot-btn ${index === 0 ? 'active' : ''}`;
            btn.innerHTML = pot.icon; // Ø§ÛŒÙ†Ø¬Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¹Ú©Ø³ Ú¯Ù„Ø¯Ø§Ù† Ø±Ø§ Ù‡Ù… Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯
            btn.onclick = () => loadModel(index, btn);
            potList.appendChild(btn);
        });

        // ØªØ§Ø¨Ø¹ ØªØºÛŒÛŒØ± Ù…Ø¯Ù„
        function loadModel(index, btnElement) {
            // ØªØºÛŒÛŒØ± Ø³ÙˆØ±Ø³ Ù…Ø¯Ù„
            viewer.src = pots[index].src;
            
            // Ø¢Ù¾Ø¯ÛŒØª Ú©Ø±Ø¯Ù† Ø§Ø³ØªØ§ÛŒÙ„ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
            document.querySelectorAll('.pot-btn').forEach(b => b.classList.remove('active'));
            btnElement.classList.add('active');
        }

        // ØªØ§Ø¨Ø¹ ØªØºÛŒÛŒØ± Ø±Ù†Ú¯ (Ø±ÙˆÛŒ Ù…ØªØ±ÛŒØ§Ù„ Ø§ØµÙ„ÛŒ Ù…Ø¯Ù„ ØªØ§Ø«ÛŒØ± Ù…ÛŒâ€ŒÚ¯Ø°Ø§Ø±Ø¯)
        function changeColor(color) {
            if (!viewer.model) return;
            
            const materials = viewer.model.materials;
            if (materials && materials.length > 0) {
                // Ø±Ù†Ú¯ Ø±Ø§ Ø±ÙˆÛŒ Ø§ÙˆÙ„ÛŒÙ† Ù…ØªØ±ÛŒØ§Ù„ Ù…Ø¯Ù„ Ø§Ø¹Ù…Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
                materials[0].pbrMetallicRoughness.setBaseColorFactor(hexToRgb(color));
            }
        }

        // ØªØ¨Ø¯ÛŒÙ„ Ø±Ù†Ú¯ HEX Ø¨Ù‡ ÙØ±Ù…Øª Ù‚Ø§Ø¨Ù„ ÙÙ‡Ù… Ø¨Ø±Ø§ÛŒ Ù…Ø¯Ù„ Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ
        function hexToRgb(hex) {
            const r = parseInt(hex.slice(1, 3), 16) / 255;
            const g = parseInt(hex.slice(3, 5), 16) / 255;
            const b = parseInt(hex.slice(5, 7), 16) / 255;
            return [r, g, b, 1]; // Ø¢Ù„ÙØ§ (Ø´ÙØ§ÙÛŒØª) Û± Ø§Ø³Øª
        }
    </script>
</body>
</html>